<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCL Pronunciation Trainer</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="src/css/style.css?v=7">
</head>
<body>
    <div class="app-layout-grid">
        <!-- Minimalist header - hidden on mobile -->
        <header class="app-header">
            <h1 class="app-title">üéß CCL Trainer</h1>
        </header>

        <!-- Main learning area (80% of screen height) -->
        <main class="learning-area">
            <div class="word-display">
                <div class="english-word" id="englishWord">Press PLAY to start learning</div>
                <div class="chinese-word" id="chineseWord">ÊåâÊí≠ÊîæÂºÄÂßãÂ≠¶‰π†</div>
                <div class="example-sentence" id="exampleSentence" style="display: none;">Example sentence will appear here</div>
                <div class="simple-progress" id="progressText">Ready to start</div>
                <div class="difficulty-badge" id="difficultyBadge" style="display: none;">üü¢ Easy</div>
            </div>
        </main>

        <!-- Essential controls (20% of screen height) -->
        <section class="control-area">
            <div class="primary-controls">
                <button class="btn-nav" id="prevBtn">‚èÆÔ∏è PREV</button>
                <button class="btn-play" id="startBtn">‚ñ∂Ô∏è PLAY</button>
                <button class="btn-play" id="pauseBtn" style="display: none;">‚è∏Ô∏è PAUSE</button>
                <button class="btn-nav" id="nextBtn">‚è≠Ô∏è NEXT</button>
            </div>
            <div class="context-bar">
                <span class="current-category" id="categoryDisplay">Social Welfare</span>
                <button class="btn-settings" id="settingsBtn">‚öôÔ∏è</button>
            </div>
        </section>

        <!-- Collapsible settings panel -->
        <div class="settings-panel collapsed" id="settingsPanel">
            <div class="settings-grid">
                <!-- Vocabulary source removed - only using conversation-based -->
                <div class="setting-item">
                    <label for="categorySelect">Category:</label>
                    <select id="categorySelect">
                        <option value="social-welfare" selected>Social Welfare</option>
                        <option value="education">Education</option>
                        <option value="legal-government">Legal & Government</option>
                        <option value="business-finance">Business & Finance</option>
                        <option value="medical-healthcare">Medical & Healthcare</option>
                        <option value="travel-immigration">Travel & Immigration</option>
                        <option value="all-categories">All Categories</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="difficultySelect">Level:</label>
                    <select id="difficultySelect">
                        <option value="all">All Levels</option>
                        <option value="easy">üü¢ Easy</option>
                        <option value="normal">üü° Normal</option>
                        <option value="hard">üî¥ Hard</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="speedSelect">Speed:</label>
                    <select id="speedSelect">
                        <option value="0.7">Slow</option>
                        <option value="1.0" selected>Normal</option>
                        <option value="1.3">Fast</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="delaySelect">Pause:</label>
                    <select id="delaySelect">
                        <option value="2000" selected>2 sec</option>
                        <option value="3000">3 sec</option>
                        <option value="4000">4 sec</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="repeatSelect">Repeat:</label>
                    <select id="repeatSelect">
                        <option value="once">1x - Term Only</option>
                        <option value="individual" selected>2x - Slow+Normal</option>
                        <option value="intensive">3x - Slow+Normal+Fast + Example</option>
                        <option value="loop">Loop + Examples</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="voiceSelect">Voice:</label>
                    <select id="voiceSelect">
                        <option value="auto">üéØ Auto (Best Match)</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Status display for screen readers -->
    <div class="sr-only" id="statusDisplay" aria-live="polite"></div>

    <!-- Only load conversation vocabulary -->
    <script src="data/generated/conversation-vocabulary-data.js?v=8"></script>
    
    <!-- Debug script to verify data loading -->  
    <script>
        console.log('=== Data Loading Check ===');
        console.log('Conversation vocabulary loaded:', typeof conversationVocabularyData !== 'undefined');
        if (typeof conversationVocabularyData !== 'undefined') {
            console.log('Total terms:', conversationVocabularyData.totalTerms);
            console.log('Vocabulary array length:', conversationVocabularyData.vocabulary?.length || 0);
            console.log('Data structure:', Object.keys(conversationVocabularyData));
        }
        
        // Debug functions for console testing
        window.debugVocab = {
            checkData: function() {
                console.log('=== Debug Vocabulary Check ===');
                console.log('Conversation loaded:', typeof conversationVocabularyData !== 'undefined');
                
                if (typeof conversationVocabularyData !== 'undefined') {
                    console.log('Total terms:', conversationVocabularyData.totalTerms);
                    console.log('Vocabulary array:', Array.isArray(conversationVocabularyData.vocabulary));
                    console.log('Array length:', conversationVocabularyData.vocabulary?.length || 0);
                    console.log('Sample first item:', conversationVocabularyData.vocabulary?.[0]);
                }
                
                if (window.vocabularyManager) {
                    console.log('Current words count:', window.vocabularyManager.getTotalWords());
                    console.log('Category counts:', window.vocabularyManager.getCategoryCounts());
                }
            }
        };
    </script>
    
    <!-- Utility Modules -->
    <script src="src/js/utils/EventBus.js?v=1"></script>
    <script src="src/js/utils/Storage.js?v=1"></script>
    
    <!-- Core Logic Modules -->
    <script src="src/js/core/VocabularyManager.js?v=12&t=1734054000"></script>
    <script src="src/js/core/ProgressTracker.js?v=1"></script>
    
    <!-- Pronunciation Database -->
    <script src="src/js/data/pronunciations.js?v=1"></script>
    
    <!-- Audio Modules -->
    <script src="src/js/audio/TTSEngine.js?v=2"></script>
    <script src="src/js/audio/VoiceSelector.js?v=1"></script>
    <script src="src/js/audio/AudioControls.js?v=2"></script>
    
    <!-- UI Modules -->
    <script src="src/js/ui/UIController.js?v=10&t=1734053400"></script>
    <script src="src/js/ui/SettingsPanel.js?v=3&t=1734054000"></script>
    
    <!-- Main App Coordinator -->
    <script src="src/js/core/App.js?v=2"></script>
</body>
</html>