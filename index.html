<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCL Pronunciation Trainer</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="src/css/style.css?v=7">
</head>

<body>
    <div class="app-layout-grid">
        <!-- Minimalist header - hidden on mobile -->
        <header class="app-header">
            <h1 class="app-title">ğŸ§ CCL Trainer</h1>
        </header>

        <!-- Main learning area (80% of screen height) -->
        <main class="learning-area">
            <div class="word-display">
                <div class="english-word" id="englishWord">Press PLAY to start learning</div>
                <div class="pronunciation" id="pronunciationText"></div>
                <div class="chinese-word" id="chineseWord">æŒ‰æ’­æ”¾å¼€å§‹å­¦ä¹ </div>
                <div class="example-sentence" id="exampleSentence" style="display: none;">Example sentence will appear
                    here</div>
                <div class="simple-progress" id="progressText">Ready to start</div>
                <div class="difficulty-badge" id="difficultyBadge" style="display: none;">ğŸŸ¢ Easy</div>
            </div>
        </main>

        <!-- Essential controls (20% of screen height) -->
        <section class="control-area">
            <div class="primary-controls">
                <button class="btn-nav" id="prevBtn">â®ï¸ PREV</button>
                <button class="btn-play" id="startBtn">â–¶ï¸ PLAY</button>
                <button class="btn-play" id="pauseBtn" style="display: none;">â¸ï¸ PAUSE</button>
                <button class="btn-nav" id="nextBtn">â­ï¸ NEXT</button>
            </div>
            <div class="context-bar">
                <span class="current-category" id="categoryDisplay">Social Welfare</span>
                <button class="btn-settings" id="settingsBtn">âš™ï¸</button>
            </div>
        </section>

        <!-- Collapsible settings panel -->
        <div class="settings-panel collapsed" id="settingsPanel">
            <div class="settings-grid">
                <!-- Learning Mode Selection -->
                <div class="setting-item">
                    <label for="learningModeSelect">Mode:</label>
                    <select id="learningModeSelect">
                        <option value="vocabulary" selected>ğŸ“š Vocabulary Focus</option>
                        <option value="dialogue">ğŸ’¬ Dialogue Practice</option>
                        <option value="unfamiliar">ğŸ”¥ Unfamiliar Words</option>
                    </select>
                </div>
                <!-- Vocabulary source removed - only using conversation-based -->
                <div class="setting-item">
                    <label for="categorySelect">Category:</label>
                    <select id="categorySelect">
                        <option value="housing" selected>ğŸ  Housing</option>
                        <option value="social-welfare">ğŸ¤ Social Welfare</option>
                        <option value="legal">âš–ï¸ Legal</option>
                        <option value="immigration">ğŸ›‚ Immigration</option>
                        <option value="business">ğŸ’¼ Business</option>
                        <option value="medical">ğŸ¥ Medical</option>
                        <option value="education">ğŸ“ Education</option>
                        <option value="tourism">âœˆï¸ Tourism</option>
                        <option value="social">ğŸ‘¥ Social</option>
                        <option value="all-categories">ğŸŒŸ All Categories</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="difficultySelect">Level:</label>
                    <select id="difficultySelect">
                        <option value="all">All Levels</option>
                        <option value="easy">ğŸŸ¢ Easy</option>
                        <option value="normal">ğŸŸ¡ Normal</option>
                        <option value="hard">ğŸ”´ Hard</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="speedSelect">Speed:</label>
                    <select id="speedSelect">
                        <option value="0.7">Slow</option>
                        <option value="1.0" selected>Normal</option>
                        <option value="1.3">Fast</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="delaySelect">Pause:</label>
                    <select id="delaySelect">
                        <option value="2000" selected>2 sec</option>
                        <option value="3000">3 sec</option>
                        <option value="4000">4 sec</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="repeatSelect">Repeat:</label>
                    <select id="repeatSelect">
                        <option value="once">1x - Term Only</option>
                        <option value="individual" selected>2x - Slow+Normal</option>
                        <option value="intensive">3x - Slow+Normal+Fast + Example</option>
                        <option value="loop">Loop + Examples</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="voiceSelect">Voice:</label>
                    <select id="voiceSelect">
                        <option value="auto">ğŸ¯ Auto (Best Match)</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Status display for screen readers -->
    <div class="sr-only" id="statusDisplay" aria-live="polite"></div>

    <!-- Debug script to verify data loading -->
    <script>
        // Debug functions for console testing
        window.debugVocab = {
            checkData: function () {
                console.log('=== Debug Vocabulary Check ===');
                console.log('DialogueDataLoader loaded:', typeof DialogueDataLoader !== 'undefined');
                console.log('Dialogue data loader instance:', typeof window.dialogueDataLoader !== 'undefined');

                if (window.dialogueDataLoader && window.dialogueDataLoader.isLoaded) {
                    console.log('Data loaded:', window.dialogueDataLoader.isLoaded);
                    console.log('Total dialogues:', window.dialogueDataLoader.data?.dialogues?.length || 0);
                    console.log('Total vocabulary terms:', window.dialogueDataLoader.data?.metadata?.totalVocabularyTerms || 0);
                    console.log('Sample dialogue:', window.dialogueDataLoader.data?.dialogues?.[0]?.title);
                }

                if (window.vocabularyManager) {
                    console.log('Current words count:', window.vocabularyManager.getTotalWords());
                    console.log('Category counts:', window.vocabularyManager.getCategoryCounts());
                }
            }
        };
    </script>

    <!-- Utility Modules -->
    <script src="src/js/utils/EventBus.js?v=1"></script>
    <script src="src/js/utils/Storage.js?v=1"></script>
    <script src="src/js/utils/CacheMigration.js?v=1"></script>

    <!-- Core Logic Modules -->
    <script src="src/js/core/VocabularyManager.js?v=12&t=1734054000"></script>
    <script src="src/js/core/ProgressTracker.js?v=1"></script>

    <!-- Pronunciation Database -->
    <script src="src/js/data/pronunciations.js?v=1"></script>

    <!-- Audio Modules -->
    <script src="src/js/audio/TTSEngine.js?v=2"></script>
    <script src="src/js/audio/VoiceSelector.js?v=1"></script>
    <script src="src/js/audio/AudioControls.js?v=2"></script>

    <!-- UI Modules -->
    <script src="src/js/ui/UIController.js?v=10&t=1734053400"></script>
    <script src="src/js/ui/SettingsPanel.js?v=3&t=1734054000"></script>

    <!-- Main App Coordinator -->
    <script src="src/js/core/App.js?v=2"></script>
</body>

</html>